# Tasks: Docusaurus Book Infrastructure & GitHub Pages Deployment

**Input**: Design documents from `/specs/001-book-infrastructure/`
**Prerequisites**: plan.md, spec.md, research.md, data-model.md, contracts/

**Tests**: This feature does not require explicit test tasks - validation is through build checks, accessibility tests, and acceptance scenarios.

**Organization**: Tasks are grouped by user story to enable independent implementation and testing of each story.

**Revision**: Tasks optimized for atomicity (one thing per task), proper sizing (15-30 minutes), and independent review.

## Format: `[ID] [P?] [Story] Description`

- **[P]**: Can run in parallel (different files, no dependencies)
- **[Story]**: Which user story this task belongs to (e.g., US1, US2, US3)
- Include exact file paths in descriptions

## Path Conventions

Project structure per plan.md:
- **Docusaurus site**: `book/` at repository root
- **Content**: `book/docs/`
- **Static assets**: `book/static/`
- **React components**: `book/src/`
- **CI/CD**: `.github/workflows/`
- **Validation scripts**: `scripts/`

---

## Phase 1: Setup (Shared Infrastructure)

**Purpose**: Project initialization and Docusaurus scaffolding

- [x] T001 Verify Node.js ‚â•18.x and npm ‚â•9.x installed (pre-requisite check)
- [x] T002 Create book/ directory in repository root
- [x] T003 Initialize Docusaurus 3.x project with classic preset in book/
- [x] T004 Install core dependencies in book/package.json (Docusaurus 3.x, React 18.x, MDX 3.x)
- [x] T005 [P] Install development dependencies in book/package.json (TypeScript, markdownlint, pa11y-ci)
- [x] T006 [P] Configure TypeScript in book/tsconfig.json for Docusaurus config
- [x] T007 [P] Create directory structure: book/docs/, book/src/, scripts/ in repository root
- [x] T008 [P] Create static asset directories: book/static/img/, book/static/diagrams/
- [x] T009 [P] Create .nvmrc file with Node.js 18.x for version consistency
- [x] T010 [P] Create .editorconfig for consistent code formatting across editors
- [x] T011 [P] Configure markdownlint rules in book/.markdownlint.json
- [x] T012 [P] Create .prettierrc in book/ for markdown formatting consistency
- [x] T013 Create .gitignore with book/build/, book/.docusaurus/, book/node_modules/

---

## Phase 2: Foundational (Blocking Prerequisites)

**Purpose**: Core configuration that MUST be complete before ANY user story can be implemented

**‚ö†Ô∏è CRITICAL**: No user story work can begin until this phase is complete

- [x] T014 Configure site title and tagline in book/docusaurus.config.ts
- [x] T015 [P] Configure baseUrl and URL in book/docusaurus.config.ts
- [x] T016 [P] Configure organizationName and projectName in book/docusaurus.config.ts for GitHub Pages
- [x] T017 [P] Configure Prism syntax highlighting in book/docusaurus.config.ts (add Python, JavaScript, YAML, Bash, XML)
- [x] T018 [P] Create basic color variable definitions in book/src/css/custom.css
- [x] T019 [P] Configure WCAG AA compliant theme colors in book/src/css/custom.css (verify contrast ratios ‚â•4.5:1)
- [x] T020 [P] Set up sidebars.js with autogenerated sidebar configuration
- [x] T021 [P] Add favicon files (favicon.ico, favicon.svg) to book/static/img/
- [x] T022 [P] Configure favicon and meta tags (viewport, charset) in book/docusaurus.config.ts
- [x] T023 [P] Create basic homepage component structure in book/src/pages/index.tsx
- [x] T024 [P] Add content and styling to homepage in book/src/pages/index.tsx
- [x] T025 [P] Create custom 404 page in book/src/pages/404.tsx
- [x] T026 [P] Configure navbar in book/docusaurus.config.ts (logo, title, items)
- [x] T027 [P] Add GitHub repository link to navbar in book/docusaurus.config.ts
- [x] T028 [P] Configure footer in book/docusaurus.config.ts (copyright, license info, links)
- [x] T029 Create package.json scripts in book/: start, build, serve
- [x] T030 [P] Add package.json scripts in book/: lint:md, validate:assets, test:a11y
- [x] T031 [P] Write per-file size validation (2MB check) in scripts/validate-assets.js
- [x] T032 [P] Write total folder size validation (100MB check) in scripts/validate-assets.js
- [x] T033 [P] Configure pa11y-ci accessibility testing in book/package.json and .pa11yci config file

**Checkpoint**: Foundation ready - user story implementation can now begin in parallel

---

## Phase 3: User Story 1 - Local Content Development (Priority: P1) üéØ MVP

**Goal**: Enable authors to create, edit, and preview textbook content locally with hot reload

**Independent Test**: Clone repo ‚Üí npm install ‚Üí npm start ‚Üí create test.md ‚Üí see changes in browser within 3 seconds

### Implementation for User Story 1

- [x] T034 [P] [US1] Create _category_.json for Part 1 (Physical AI) in book/docs/part-01-physical-ai/_category_.json
- [x] T035 [P] [US1] Create _category_.json for Part 2 (ROS 2) in book/docs/part-02-ros2/_category_.json
- [x] T036 [P] [US1] Create _category_.json for Part 3 (Simulation) in book/docs/part-03-simulation/_category_.json
- [x] T037 [P] [US1] Create _category_.json for Part 4 (Isaac) in book/docs/part-04-isaac/_category_.json
- [x] T038 [P] [US1] Create _category_.json for Part 5 (HRI) in book/docs/part-05-human-robot-interaction/_category_.json
- [x] T039 [P] [US1] Create _category_.json for Part 6 (Conversational) in book/docs/part-06-conversational-robotics/_category_.json
- [x] T040 [P] [US1] Create intro.md for Part 1 explaining Physical AI learning outcome in book/docs/part-01-physical-ai/intro.md
- [x] T041 [P] [US1] Create intro.md for Part 2 explaining ROS 2 learning outcome in book/docs/part-02-ros2/intro.md
- [x] T042 [P] [US1] Create intro.md for Part 3 explaining Simulation learning outcome in book/docs/part-03-simulation/intro.md
- [x] T043 [P] [US1] Create intro.md for Part 4 explaining Isaac learning outcome in book/docs/part-04-isaac/intro.md
- [x] T044 [P] [US1] Create intro.md for Part 5 explaining HRI learning outcome in book/docs/part-05-human-robot-interaction/intro.md
- [x] T045 [P] [US1] Create intro.md for Part 6 explaining Conversational AI learning outcome in book/docs/part-06-conversational-robotics/intro.md
- [x] T046 [P] [US1] Create placeholder chapter in Part 1: book/docs/part-01-physical-ai/chapter-01-introduction/index.md
- [x] T047 [P] [US1] Create placeholder chapter in Part 2: book/docs/part-02-ros2/chapter-01-introduction/index.md
- [x] T048 [P] [US1] Create placeholder chapter in Part 3: book/docs/part-03-simulation/chapter-01-introduction/index.md
- [x] T049 [P] [US1] Create placeholder chapter in Part 4: book/docs/part-04-isaac/chapter-01-introduction/index.md
- [x] T050 [P] [US1] Create placeholder chapter in Part 5: book/docs/part-05-human-robot-interaction/chapter-01-introduction/index.md
- [x] T051 [P] [US1] Create placeholder chapter in Part 6: book/docs/part-06-conversational-robotics/chapter-01-introduction/index.md
- [x] T052 [P] [US1] Add 3 sample images (<2MB each) to book/static/img/shared/ for testing
- [x] T053 [US1] Configure hot reload settings in book/docusaurus.config.ts (optimize for <3s updates)
- [x] T054 [US1] Test dev server startup time with `npm start` (verify <30s, document if slower)
- [x] T055 [US1] Create basic CONTRIBUTING.md structure and content guidelines
- [x] T056 [US1] Add markdown syntax examples and best practices to CONTRIBUTING.md

**Checkpoint**: At this point, authors can run `npm start` and begin creating content with live preview

**Acceptance Validation**:
- ‚úÖ `npm start` launches dev server in <30 seconds
- ‚úÖ Creating new .md file in chapters/ ‚Üí appears in navigation automatically
- ‚úÖ Editing existing file ‚Üí browser refreshes in <3 seconds
- ‚úÖ Images display correctly when referenced in markdown

---

## Phase 4: User Story 2 - Automated Deployment (Priority: P2)

**Goal**: Automatically deploy to GitHub Pages on main branch pushes with build validation and atomic deployments

**Independent Test**: Push commit to main ‚Üí GitHub Actions runs ‚Üí site updates on GitHub Pages within 5 minutes ‚Üí build failure leaves previous version live

### Implementation for User Story 2

- [ ] T057 [P] [US2] Copy GitHub Actions workflow from contracts/ to .github/workflows/deploy.yml and update repository values
- [ ] T058 [P] [US2] Configure GitHub Pages in repository settings (source: gh-pages branch, enforce HTTPS)
- [ ] T059 [P] [US2] Configure branch protection rules for main branch (require PR, passing checks)
- [ ] T060 [P] [US2] Create GitHub issue templates in .github/ISSUE_TEMPLATE/ (bug, feature, documentation)
- [ ] T061 [P] [US2] Create GitHub PR template in .github/pull_request_template.md
- [ ] T062 [P] [US2] Add build validation step to workflow in .github/workflows/deploy.yml
- [ ] T063 [P] [US2] Add asset validation step to workflow (scripts/validate-assets.js)
- [ ] T064 [P] [US2] Add markdown linting step to workflow (npm run lint:md)
- [ ] T065 [P] [US2] Add accessibility testing step to workflow (npm run test:a11y)
- [ ] T066 [US2] Configure workflow concurrency settings in .github/workflows/deploy.yml to prevent duplicate deployments
- [ ] T067 [US2] Test deployment: push valid commit to main ‚Üí verify site updates within 5 minutes
- [ ] T068 [US2] Test failure scenario: push broken markdown ‚Üí verify previous version stays live
- [ ] T069 [P] [US2] Add workflow status badge to repository README.md
- [ ] T070 [US2] Document deployment trigger and monitoring process in quickstart.md
- [ ] T071 [US2] Document deployment troubleshooting steps in quickstart.md

**Checkpoint**: At this point, pushing to main triggers automated deployment with full validation

**Acceptance Validation**:
- ‚úÖ Push to main ‚Üí workflow triggers within 1 minute
- ‚úÖ Build completes within 5 minutes
- ‚úÖ Updated content visible on GitHub Pages within 2 minutes of build
- ‚úÖ Build failure ‚Üí previous deployment remains live (atomic)
- ‚úÖ Feature branch push ‚Üí no deployment occurs

---

## Phase 5: User Story 3 - Book Navigation and Structure (Priority: P3)

**Goal**: Implement hierarchical navigation with expandable/collapsible sections, mobile-responsive menu, and cross-references

**Independent Test**: Create multi-level content ‚Üí verify sidebar shows hierarchy ‚Üí test mobile menu ‚Üí verify back button navigation

### Implementation for User Story 3

- [ ] T072 [P] [US3] Configure sidebar categories with collapsed: false for Parts in book/sidebars.js
- [ ] T073 [P] [US3] Add category icons (emojis) to Part 1-3 _category_.json files
- [ ] T074 [P] [US3] Add category icons (emojis) to Part 4-6 _category_.json files
- [ ] T075 [P] [US3] Configure table of contents depth in book/docusaurus.config.ts
- [ ] T076 [P] [US3] Configure mobile menu breakpoint and hamburger icon in book/docusaurus.config.ts
- [ ] T077 [P] [US3] Configure "Previous/Next" navigation buttons in book/docusaurus.config.ts
- [ ] T078 [P] [US3] Add internal cross-reference examples in Part 1-2 sample content
- [ ] T079 [P] [US3] Add internal cross-reference examples in Part 3-4 sample content
- [ ] T080 [P] [US3] Configure "Edit this page" GitHub links in book/docusaurus.config.ts docs preset
- [ ] T081 [US3] Test navigation: create 4-level hierarchy (part ‚Üí chapter ‚Üí section ‚Üí subsection)
- [ ] T082 [US3] Test mobile navigation on viewports 320px-768px (verify hamburger menu, touch interactions)
- [ ] T083 [US3] Test browser navigation (back button, forward button, history across 5+ pages)
- [ ] T084 [US3] Verify sidebar state persistence (collapsed/expanded state maintained during navigation)

**Checkpoint**: All user stories should now be independently functional - full book infrastructure ready

**Acceptance Validation**:
- ‚úÖ Sidebar displays hierarchical structure with expandable/collapsible sections
- ‚úÖ Navigation links work correctly across all pages
- ‚úÖ Mobile menu accessible via hamburger icon on small screens
- ‚úÖ Browser back button returns to previous page correctly
- ‚úÖ 3+ levels of navigation hierarchy supported

---

## Phase 6: Polish & Cross-Cutting Concerns

**Purpose**: Improvements that affect multiple user stories and final quality checks

- [ ] T085 [P] Configure Docusaurus built-in search in book/docusaurus.config.ts
- [ ] T086 [P] Add SEO meta tags in book/docusaurus.config.ts (description, keywords, og:tags)
- [ ] T087 [P] Configure robots.txt in book/static/robots.txt
- [ ] T088 [P] Verify sitemap.xml auto-generation in build output
- [ ] T089 [P] Create README.md with badges, quickstart, and project overview
- [ ] T090 [P] Add MIT LICENSE file (or appropriate educational license)
- [ ] T091 [P] Add Code of Conduct (Contributor Covenant) in CODE_OF_CONDUCT.md
- [ ] T092 [P] Create CHANGELOG.md for infrastructure version tracking
- [ ] T093 [P] Verify all 6 Parts have _category_.json with learning outcome mappings
- [ ] T094 Create deployment documentation in book/docs/meta/deployment.md
- [ ] T095 Add troubleshooting guide section to book/docs/meta/deployment.md
- [ ] T096 Test search performance with 20+ pages (verify <1s keyword query response)
- [ ] T097 Test page load times on standard broadband (verify <2s for 5 representative pages)
- [ ] T098 Run Lighthouse accessibility audit (verify score ‚â•90 on 5 pages)
- [ ] T099 Run axe DevTools scan on 5 pages (verify zero critical WCAG AA violations)
- [ ] T100 Test site with JavaScript disabled (verify graceful degradation)
- [ ] T101 Test browser compatibility (Chrome, Firefox, Safari, Edge - latest versions)
- [ ] T102 Run PageSpeed Insights on homepage and 2 content pages (verify scores)
- [ ] T103 Verify build output size <1GB (check book/build/ folder size)
- [ ] T104 Validate all acceptance scenarios from spec.md are met (checklist review)
- [ ] T105 Run complete quickstart.md validation end-to-end (fresh clone ‚Üí running site)

---

## Dependencies & Execution Order

### Phase Dependencies

- **Setup (Phase 1)**: No dependencies - can start immediately
- **Foundational (Phase 2)**: Depends on Setup (Phase 1) completion - BLOCKS all user stories
- **User Stories (Phase 3-5)**: All depend on Foundational (Phase 2) completion
  - User stories CAN proceed in parallel (if multiple contributors)
  - OR sequentially in priority order: US1 (P1) ‚Üí US2 (P2) ‚Üí US3 (P3)
- **Polish (Phase 6)**: Depends on all user stories being complete

### User Story Dependencies

- **User Story 1 (P1)**: Can start after Foundational - No dependencies on other stories
- **User Story 2 (P2)**: Can start after Foundational - No dependencies on US1 (independent deployment setup)
- **User Story 3 (P3)**: Can start after Foundational - No dependencies on US1/US2 (navigation works with or without deployment)

**Key Insight**: All 3 user stories are independent once Foundation is complete - can be developed in parallel by different team members

### Within Each User Story

- **US1**: All Part _category_.json tasks (T034-T039) can run in parallel
- **US1**: All Part intro.md tasks (T040-T045) can run in parallel
- **US1**: All placeholder chapter tasks (T046-T051) can run in parallel
- **US2**: Most workflow configuration tasks (T057-T065) can run in parallel
- **US3**: All configuration tasks (T072-T080) can run in parallel
- **Polish**: Most tasks (T085-T093, T096-T103) can run in parallel

### Parallel Opportunities

- **Setup Phase**: T005-T013 (9 tasks in parallel after T001-T004)
- **Foundational Phase**: T017-T028, T031-T033 (15 tasks in parallel after T014-T016, T029-T030)
- **User Story 1**: T034-T052 (19 tasks in parallel), T055-T056 (2 sequential for CONTRIBUTING.md)
- **User Story 2**: T057-T065, T069 (10 tasks in parallel), T070-T071 (2 sequential for docs)
- **User Story 3**: T072-T080 (9 tasks in parallel), T081-T084 (4 sequential tests)
- **Polish**: T085-T093, T096-T103 (17 tasks can run in parallel)

**Maximum Parallelism**: After Foundational phase, all 3 user stories can proceed simultaneously with different team members

---

## Parallel Example: User Story 1 (Content Structure)

```bash
# These 19 tasks can all launch together (different files, no dependencies):

# Category files (6 parallel)
Task T034-T039: Create all 6 _category_.json files simultaneously

# Intro pages (6 parallel)
Task T040-T045: Create all 6 Part intro.md files simultaneously

# Placeholder chapters (6 parallel)
Task T046-T051: Create all 6 placeholder chapter-01 files simultaneously

# Sample assets (1 task)
Task T052: Add sample images to shared/

# Total: 19 tasks, all writing to different files, zero conflicts
```

---

## Implementation Strategy

### MVP First (User Story 1 Only)

1. Complete Phase 1: Setup (T001-T013) ‚Üí Basic Docusaurus project
2. Complete Phase 2: Foundational (T014-T033) ‚Üí Configuration ready
3. Complete Phase 3: User Story 1 (T034-T056) ‚Üí Local development ready
4. **STOP and VALIDATE**: Run `npm start`, create content, verify hot reload works
5. **MVP COMPLETE**: Authors can now write content locally

**Value Delivered**: Content authors can immediately begin creating textbook chapters

**MVP Task Count**: 56 tasks

### Incremental Delivery

1. **Foundation** (Phases 1-2) ‚Üí Docusaurus configured (33 tasks)
2. **+ US1** (Phase 3) ‚Üí Local development works (23 tasks) ‚Üí **Demo to authors**
3. **+ US2** (Phase 4) ‚Üí Automated deployment works (15 tasks) ‚Üí **Book goes live**
4. **+ US3** (Phase 5) ‚Üí Enhanced navigation (13 tasks) ‚Üí **Full UX complete**
5. **+ Polish** (Phase 6) ‚Üí Search, SEO, accessibility validated (21 tasks) ‚Üí **Production ready**

Each increment adds value without breaking previous functionality

### Parallel Team Strategy

With 3 developers after Foundational phase completes:

1. Team completes Setup + Foundational together (Phases 1-2, 33 tasks)
2. Once Foundational is done:
   - **Developer A**: User Story 1 (Local development) - T034-T056 (23 tasks)
   - **Developer B**: User Story 2 (Deployment) - T057-T071 (15 tasks)
   - **Developer C**: User Story 3 (Navigation) - T072-T084 (13 tasks)
3. All 3 stories complete independently and integrate cleanly
4. Team collaborates on Polish (Phase 6, 21 tasks)

**Timeline Estimate**:
- Sequential (1 dev): ~6-8 days (105 tasks √ó ~20 min avg = ~35 hours)
- Parallel (3 devs): ~3-4 days (foundation together, stories split, polish together)

---

## Task Summary

**Total Tasks**: 105 (revised from 65 for better atomicity and sizing)

**By Phase**:
- Phase 1 (Setup): 13 tasks
- Phase 2 (Foundational): 20 tasks (BLOCKING)
- Phase 3 (US1 - Local Dev): 23 tasks ‚Üí **MVP**
- Phase 4 (US2 - Deployment): 15 tasks
- Phase 5 (US3 - Navigation): 13 tasks
- Phase 6 (Polish): 21 tasks

**By User Story**:
- User Story 1 (P1): 23 tasks ‚Üí Local content development
- User Story 2 (P2): 15 tasks ‚Üí Automated deployment
- User Story 3 (P3): 13 tasks ‚Üí Navigation & structure

**Parallel Opportunities**: 70 tasks marked [P] (67% can run in parallel with proper coordination)

**MVP Scope**: Phases 1-3 (56 tasks) delivers working local development environment

**Average Task Duration**: ~15-30 minutes (optimized for consistent sizing)

**Independent Tests**:
- US1: Install ‚Üí create content ‚Üí see in browser (no deployment needed)
- US2: Push to main ‚Üí see on GitHub Pages (works even without US1 content)
- US3: Navigate site ‚Üí verify hierarchy (works with basic or rich content)

---

## Key Improvements in This Revision

**Atomicity**:
- Split T001 (create dir + initialize) ‚Üí T002, T003
- Split T007 (3 configs) ‚Üí T014, T015, T016
- Split T009 (theme) ‚Üí T018, T019
- Split T011 (homepage) ‚Üí T023, T024
- Split T015 (validation script) ‚Üí T031, T032
- Split old T025 (6 chapters) ‚Üí T046-T051
- Split T029 (CONTRIBUTING.md) ‚Üí T055, T056
- Split T040 (deployment docs) ‚Üí T070, T071
- Split T062 (deployment docs) ‚Üí T094, T095

**Proper Sizing**:
- Combined T004+T005 into T007, T008
- Removed ambiguous "optional" tasks (old T043, T045, T063 now clear)
- Split overly large tasks into 15-30 minute chunks

**Added Missing Tasks**:
- T001: Pre-requisite version check
- T009-T010: .nvmrc, .editorconfig
- T012: .prettierrc
- T021-T022: Favicon configuration
- T025: Custom 404 page
- T040-T045: Part intro.md files (explain learning outcomes)
- T059-T061: GitHub templates (issues, PR)
- T075, T077: ToC depth, Prev/Next nav
- T087-T088: robots.txt, sitemap
- T091-T092: Code of Conduct, CHANGELOG
- T100-T102: JavaScript disabled test, browser compatibility, PageSpeed

**Better Organization**:
- Clear sequential tasks (T055-T056 for CONTRIBUTING.md)
- Consolidated testing into logical groups (T081-T084 for US3 navigation tests)
- All 6 parts treated consistently (category files, intros, chapters)

---

## Notes

- [P] tasks = different files, no dependencies, can run in parallel
- [Story] label maps task to specific user story for traceability
- Each user story is independently completable and testable
- No explicit test files needed - validation through build checks and acceptance scenarios
- Commit after each task or logical group (e.g., all Part _category_.json files together)
- Stop at any checkpoint to validate story independently
- Asset validation is automated via scripts (T031-T032, T063)
- Accessibility validation is automated via pa11y (T033, T065, T098-T099)
- WCAG compliance verified through color theme (T018-T019) and accessibility tests
- All tasks now sized for 15-30 minutes of focused work
- Testing tasks grouped at phase checkpoints for efficient validation
